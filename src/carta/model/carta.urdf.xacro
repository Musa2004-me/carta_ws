<?xml version="1.0"?>
<robot name="carta_rob" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.1124 5.6052E-06 -0.19648"
        rpy="0 0 0" />
      <mass
        value="6.5004" />
      <inertia
        ixx="0.16675"
        ixy="-3.2234E-08"
        ixz="0.0061049"
        iyy="0.32249"
        iyz="8.7361E-08"
        izz="0.46641" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 1 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="right_wheel">
    <inertial>
      <origin
        xyz="0.00072185 -9.4034E-05 -4.3345E-05"
        rpy="0 0 0" />
      <mass
        value="7.9806" />
      <inertia
        ixx="0.068768"
        ixy="6.2572E-05"
        ixz="-2.0721E-05"
        iyy="0.068422"
        iyz="-1.2057E-05"
        izz="0.12823" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/right_wheel.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/right_wheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="right_wheel_joint"
    type="continuous">
    <origin
      xyz="-0.39103 -0.19663 -0.64082"
      rpy="1.5708 0.038457 0" />
    <parent
      link="base_link" />
    <child
      link="right_wheel" />
    <axis
      xyz="0 0 1" />
    <limit
      effort="10"
      velocity="10" />
    <dynamics
      damping="0.1"
      friction="0.1" />
  </joint>
  <link
    name="left_wheel">
    <inertial>
      <origin
        xyz="-0.00067704 -0.00016151 -4.335E-05"
        rpy="0 0 0" />
      <mass
        value="7.9806" />
      <inertia
        ixx="0.068685"
        ixy="0.00016087"
        ixz="1.5203E-05"
        iyy="0.068505"
        iyz="1.8533E-05"
        izz="0.12823" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/left_wheel.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/left_wheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="left_wheel_joint"
    type="continuous">
    <origin
      xyz="-0.391 0.20337 -0.64083"
      rpy="1.5708 0.038457 0" />
    <parent
      link="base_link" />
    <child
      link="left_wheel" />
    <axis
      xyz="0 0 1" />
    <limit
      effort="10"
      velocity="10" />
    <dynamics
      damping="0.1"
      friction="0.1" />
  </joint>
  <link
    name="right_caster">
    <inertial>
      <origin
        xyz="3.636E-15 -4.996E-16 0.0095082"
        rpy="0 0 0" />
      <mass
        value="4.8125" />
      <inertia
        ixx="0.045063"
        ixy="1.3986E-17"
        ixz="1.5592E-14"
        iyy="0.045063"
        iyz="-1.9849E-15"
        izz="0.084869" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/right_caster.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/right_caster.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="right_caster_joint"
    type="continuous">
    <origin
      xyz="0.1856 -0.19149 -0.67086"
      rpy="1.5708 0.038457 0" />
    <parent
      link="base_link" />
    <child
      link="right_caster" />
    <axis
      xyz="0 0 1" />
    <limit
      effort="10"
      velocity="10" />
    <dynamics
      damping="0.1"
      friction="0.1" />
  </joint>
  <link
    name="left_caster">
    <inertial>
      <origin
        xyz="-3.6082E-15 5.5511E-16 -0.0095082"
        rpy="0 0 0" />
      <mass
        value="4.8125" />
      <inertia
        ixx="0.045063"
        ixy="2.3852E-18"
        ixz="1.5584E-14"
        iyy="0.045063"
        iyz="-1.9851E-15"
        izz="0.084869" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/left_caster.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/left_caster.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="left_caster_wheel"
    type="continuous">
    <origin
      xyz="0.1856 0.19149 -0.67086"
      rpy="1.5708 0.038457 0" />
    <parent
      link="base_link" />
    <child
      link="left_caster" />
    <axis
      xyz="0 0 -1" />
    <limit
      effort="10"
      velocity="10" />
    <dynamics
      damping="0.1"
      friction="0.1" />
  </joint>
  <link
    name="lidar">
    <inertial>
      <origin
        xyz="-0.00024222 6.9389E-17 -0.0062953"
        rpy="0 0 0" />
      <mass
        value="0.012324" />
      <inertia
        ixx="1.1235E-06"
        ixy="-3.5497E-22"
        ixz="3.0591E-08"
        iyy="1.1223E-06"
        iyz="-9.4762E-21"
        izz="1.9174E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/lidar.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/lidar.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="lidar_joint"
    type="fixed">
    <origin
      xyz="0.25989 2.5E-05 0.038536"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="lidar" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="cam_1">
    <inertial>
      <origin
        xyz="-0.058872 0.030275 0.0068597"
        rpy="0 0 0" />
      <mass
        value="0.33208" />
      <inertia
        ixx="0.00029024"
        ixy="-1.3593E-07"
        ixz="3.3312E-05"
        iyy="0.00039434"
        iyz="-2.1393E-08"
        izz="0.00062864" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_1.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_1.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="cam_1_joint"
    type="fixed">
    <origin
      xyz="0.41842 -0.0299 -0.13284"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="cam_1" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="cam_2">
    <inertial>
      <origin
        xyz="-0.058872 0.030275 0.0068597"
        rpy="0 0 0" />
      <mass
        value="0.33208" />
      <inertia
        ixx="0.00029024"
        ixy="-1.3593E-07"
        ixz="3.3312E-05"
        iyy="0.00039434"
        iyz="-2.1393E-08"
        izz="0.00062864" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_2.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="cam_2_joint"
    type="fixed">
    <origin
      xyz="0.41669 -0.03119 -0.1778"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="cam_2" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="cam_3">
    <inertial>
      <origin
        xyz="-0.058872 0.030275 0.0068597"
        rpy="0 0 0" />
      <mass
        value="0.33208" />
      <inertia
        ixx="0.00029024"
        ixy="-1.3593E-07"
        ixz="3.3312E-05"
        iyy="0.00039434"
        iyz="-2.1393E-08"
        izz="0.00062864" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_3.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0 0 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/cam_3.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="cam_3_joint"
    type="fixed">
    <origin
      xyz="0.43075 -0.021967 -0.28052"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="cam_3" />
    <axis
      xyz="0 0 0" />
    <limit
      lower="0"
      upper="0"
      effort="0"
      velocity="0" />
  </joint>
  <link
    name="lidar_2">
    <inertial>
      <origin
        xyz="-0.00024222 6.9389E-17 -0.0062953"
        rpy="0 0 0" />
      <mass
        value="0.012324" />
      <inertia
        ixx="1.1235E-06"
        ixy="-5.5322E-22"
        ixz="3.0591E-08"
        iyy="1.1223E-06"
        iyz="-9.8318E-21"
        izz="1.9174E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/lidar_2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="file://$(find carta)/meshes/lidar_2.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="lidar__joint"
    type="fixed">
    <origin
      xyz="0.39626 -0.0019246 -0.24702"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="lidar_2" />
    <axis
      xyz="0 1 0" />
  </joint>
    <!-- ================= Gazebo Visual Materials ================= -->
  <gazebo reference="base_link">
    <mu1>0.5</mu1><mu2>0.5</mu2>
    <material>Gazebo/Blue</material>
  </gazebo>

  <gazebo reference="right_wheel">
    <mu1>0.5</mu1><mu2>0.5</mu2>
    <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference="left_wheel">
    <mu1>0.5</mu1><mu2>0.5</mu2>
    <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference="right_caster">
    <mu1>0.001</mu1><mu2>0.001</mu2>
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="left_caster">
    <mu1>0.001</mu1><mu2>0.001</mu2>
    <material>Gazebo/Grey</material>
  </gazebo>

    <!-- ================= Diff Drive Plugin ================= -->
  <gazebo>
    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">
      <ros><namespace>/</namespace></ros>
      <left_joint>left_wheel_joint</left_joint>
      <right_joint>right_wheel_joint</right_joint>
      <wheel_separation>0.4</wheel_separation>
      <wheel_diameter>0.361</wheel_diameter>
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <publish_wheel_tf>true</publish_wheel_tf>
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_link</robot_base_frame>
      <command_topic>cmd_vel</command_topic>
      <odometry_topic>odom</odometry_topic>
    </plugin>
  </gazebo>

  <!-- ================= Joint State Publisher Plugin ================= -->
  <gazebo>
    <plugin name="gazebo_ros_joint_state_publisher" filename="libgazebo_ros_joint_state_publisher.so">
      <update_rate>50</update_rate>
    </plugin>
  </gazebo>
</robot>